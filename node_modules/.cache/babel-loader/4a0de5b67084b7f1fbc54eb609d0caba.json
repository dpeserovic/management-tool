{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _startsWith2 = require('lodash/startsWith');\n\nvar _startsWith3 = _interopRequireDefault(_startsWith2);\n\nvar _filter2 = require('lodash/filter');\n\nvar _filter3 = _interopRequireDefault(_filter2);\n\nvar _set2 = require('lodash/set');\n\nvar _set3 = _interopRequireDefault(_set2);\n\nvar _each2 = require('lodash/each');\n\nvar _each3 = _interopRequireDefault(_each2);\n\nvar _isEmpty2 = require('lodash/isEmpty');\n\nvar _isEmpty3 = _interopRequireDefault(_isEmpty2);\n\nvar _get2 = require('lodash/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _map2 = require('lodash/map');\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _isPlainObject2 = require('lodash/isPlainObject');\n\nvar _isPlainObject3 = _interopRequireDefault(_isPlainObject2);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _merge2 = require('lodash/merge');\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _split2 = require('lodash/split');\n\nvar _split3 = _interopRequireDefault(_split2);\n\nvar _transform2 = require('lodash/transform');\n\nvar _transform3 = _interopRequireDefault(_transform2);\n\nvar _last2 = require('lodash/last');\n\nvar _last3 = _interopRequireDefault(_last2);\n\nvar _trimEnd2 = require('lodash/trimEnd');\n\nvar _trimEnd3 = _interopRequireDefault(_trimEnd2);\n\nvar _endsWith2 = require('lodash/endsWith');\n\nvar _endsWith3 = _interopRequireDefault(_endsWith2);\n\nvar _reduceRight2 = require('lodash/reduceRight');\n\nvar _reduceRight3 = _interopRequireDefault(_reduceRight2);\n\nvar _without2 = require('lodash/without');\n\nvar _without3 = _interopRequireDefault(_without2);\n\nvar _values2 = require('lodash/values');\n\nvar _values3 = _interopRequireDefault(_values2);\n\nvar _replace2 = require('lodash/replace');\n\nvar _replace3 = _interopRequireDefault(_replace2);\n\nvar _isString2 = require('lodash/isString');\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _isNumber2 = require('lodash/isNumber');\n\nvar _isNumber3 = _interopRequireDefault(_isNumber2);\n\nvar _isBoolean2 = require('lodash/isBoolean');\n\nvar _isBoolean3 = _interopRequireDefault(_isBoolean2);\n\nvar _isDate2 = require('lodash/isDate');\n\nvar _isDate3 = _interopRequireDefault(_isDate2);\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar defaultClearValue = function defaultClearValue(_ref) {\n  var value = _ref.value;\n  if ((0, _isArray3.default)(value)) return [];\n  if ((0, _isDate3.default)(value)) return null;\n  if ((0, _isBoolean3.default)(value)) return false;\n  if ((0, _isNumber3.default)(value)) return 0;\n  if ((0, _isString3.default)(value)) return '';\n  return undefined;\n};\n\nvar defaultValue = function defaultValue(_ref2) {\n  var type = _ref2.type,\n      _ref2$nullable = _ref2.nullable,\n      nullable = _ref2$nullable === undefined ? false : _ref2$nullable,\n      _ref2$isEmptyArray = _ref2.isEmptyArray,\n      isEmptyArray = _ref2$isEmptyArray === undefined ? false : _ref2$isEmptyArray;\n  if (type === 'date') return null;\n  if (type === 'datetime-local') return null;\n  if (type === 'checkbox') return false;\n  if (type === 'number') return 0;\n  if (nullable) return null;\n  if (isEmptyArray) return [];\n  return '';\n};\n\nvar parsePath = function parsePath(path) {\n  var $path = path;\n  $path = (0, _replace3.default)($path, new RegExp('\\\\[', 'g'), '.');\n  $path = (0, _replace3.default)($path, new RegExp('\\\\]', 'g'), '');\n  return $path;\n};\n\nvar parseInput = function parseInput(input, _ref3) {\n  var type = _ref3.type,\n      isEmptyArray = _ref3.isEmptyArray,\n      nullable = _ref3.nullable,\n      separated = _ref3.separated,\n      unified = _ref3.unified,\n      fallback = _ref3.fallback;\n  return input(_utils2.default.$try(separated, unified, fallback, defaultValue({\n    type: type,\n    isEmptyArray: isEmptyArray,\n    nullable: nullable\n  })));\n};\n\nvar parseArrayProp = function parseArrayProp($val, $prop) {\n  var $values = (0, _values3.default)($val);\n\n  if ($prop === 'value' || $prop === 'initial' || $prop === 'default') {\n    return (0, _without3.default)($values, null, undefined, '');\n  }\n\n  return $values;\n};\n\nvar parseCheckArray = function parseCheckArray(field, value, prop) {\n  return field.hasIncrementalKeys ? parseArrayProp(value, prop) : value;\n};\n\nvar parseCheckOutput = function parseCheckOutput($field, $prop) {\n  return $prop === 'value' && $field.$output ? $field.$output($field[$prop]) : $field[$prop];\n};\n\nvar defineFieldsFromStruct = function defineFieldsFromStruct(struct) {\n  var add = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return (0, _reduceRight3.default)(struct, function ($, name) {\n    var obj = {};\n\n    if ((0, _endsWith3.default)(name, '[]')) {\n      var val = add ? [$] : [];\n      obj[(0, _trimEnd3.default)(name, '[]')] = val;\n      return obj;\n    } // no brakets\n\n\n    var prev = struct[struct.indexOf(name) - 1];\n    var stop = (0, _endsWith3.default)(prev, '[]') && (0, _last3.default)(struct) === name;\n    if (!add && stop) return obj;\n    obj[name] = $;\n    return obj;\n  }, {});\n};\n\nvar handleFieldsArrayOfStrings = function handleFieldsArrayOfStrings($fields) {\n  var add = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var fields = $fields; // handle array with field struct (strings)\n\n  if (_utils2.default.isStruct(fields)) {\n    fields = (0, _transform3.default)(fields, function ($obj, $) {\n      var pathStruct = (0, _split3.default)($, '.'); // as array of strings (with empty values)\n\n      if (!pathStruct.length) return Object.assign($obj, _defineProperty({}, $, '')); // define flat or nested fields from pathStruct\n\n      return (0, _merge3.default)($obj, defineFieldsFromStruct(pathStruct, add));\n    }, {});\n  }\n\n  return fields;\n};\n\nvar handleFieldsArrayOfObjects = function handleFieldsArrayOfObjects($fields) {\n  var fields = $fields; // handle array of objects (with unified props)\n\n  if (_utils2.default.isArrayOfObjects(fields)) {\n    fields = (0, _transform3.default)(fields, function ($obj, field) {\n      if (_utils2.default.hasUnifiedProps({\n        fields: {\n          field: field\n        }\n      }) && !(0, _has3.default)(field, 'name')) return undefined;\n      return Object.assign($obj, _defineProperty({}, field.name, field));\n    }, {});\n  }\n\n  return fields;\n};\n\nvar handleFieldsNested = function handleFieldsNested(fields) {\n  var strictProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return (0, _transform3.default)(fields, function (obj, field, key) {\n    if (_utils2.default.allowNested(field, strictProps)) {\n      // define nested field\n      return Object.assign(obj, _defineProperty({}, key, {\n        fields: _utils2.default.isEmptyArray(field) ? [] : handleFieldsNested(field)\n      }));\n    }\n\n    return Object.assign(obj, _defineProperty({}, key, field));\n  }, {});\n};\n/* mapNestedValuesToUnifiedValues\n\nFROM:\n\n{\n  street: '123 Fake St.',\n  zip: '12345',\n}\n\nTO:\n\n[{\n  name: 'street'\n  value: '123 Fake St.',\n}, {\n  name: 'zip'\n  value: '12345',\n}]\n\n*/\n\n\nvar mapNestedValuesToUnifiedValues = function mapNestedValuesToUnifiedValues(data) {\n  return (0, _isPlainObject3.default)(data) ? (0, _map3.default)(data, function (value, name) {\n    return {\n      value: value,\n      name: name\n    };\n  }) : undefined;\n};\n/* reduceValuesToUnifiedFields\n\nFROM:\n\n{\n  name: 'fatty',\n  address: {\n    street: '123 Fake St.',\n    zip: '12345',\n  },\n};\n\nTO:\n\n{\n  name: {\n    value: 'fatty',\n    fields: undefined\n  },\n  address: {\n    value: {\n      street: '123 Fake St.',\n      zip: '12345'\n    },\n    fields: [ ... ]\n  },\n};\n\n*/\n\n\nvar reduceValuesToUnifiedFields = function reduceValuesToUnifiedFields(values) {\n  return (0, _transform3.default)(values, function (obj, value, key) {\n    return Object.assign(obj, _defineProperty({}, key, {\n      value: value,\n      fields: mapNestedValuesToUnifiedValues(value)\n    }));\n  }, {});\n};\n/*\n  Fallback Unified Props to Sepated Mode\n*/\n\n\nvar handleFieldsPropsFallback = function handleFieldsPropsFallback(fields, initial, fallback) {\n  if (!(0, _has3.default)(initial, 'values')) return fields; // if the 'values' object is passed in constructor\n  // then update the fields definitions\n\n  var values = initial.values;\n\n  if (_utils2.default.hasUnifiedProps({\n    fields: fields\n  })) {\n    values = reduceValuesToUnifiedFields(values);\n  }\n\n  return (0, _merge3.default)(fields, (0, _transform3.default)(values, function (result, v, k) {\n    if ((0, _isArray3.default)(fields[k])) result[k] = v;\n    if (!(k in fields) && (!isNaN(Number(k)) || fallback)) result[k] = v;\n  }, {}));\n};\n\nvar mergeSchemaDefaults = function mergeSchemaDefaults(fields, validator) {\n  if (validator) {\n    var schema = (0, _get3.default)(validator.plugins, 'svk.config.schema');\n\n    if ((0, _isEmpty3.default)(fields) && schema && !!schema.properties) {\n      (0, _each3.default)(schema.properties, function (prop, key) {\n        (0, _set3.default)(fields, key, {\n          value: prop.default,\n          label: prop.title\n        });\n      });\n    }\n  }\n\n  return fields;\n};\n\nvar prepareFieldsData = function prepareFieldsData(initial) {\n  var strictProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var fallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var fields = (0, _merge3.default)(handleFieldsArrayOfStrings(initial.fields, false), handleFieldsArrayOfStrings(initial.struct, false));\n  fields = handleFieldsArrayOfObjects(fields);\n  fields = handleFieldsPropsFallback(fields, initial, fallback);\n  fields = handleFieldsNested(fields, strictProps);\n  return fields;\n};\n\nvar pathToFieldsTree = function pathToFieldsTree(struct, path) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var add = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  var structPath = _utils2.default.pathToStruct(path);\n\n  var structArray = (0, _filter3.default)(struct, function (item) {\n    return (0, _startsWith3.default)(item, structPath);\n  });\n  var $tree = handleFieldsArrayOfStrings(structArray, add);\n  var $struct = (0, _replace3.default)(structPath, new RegExp('\\\\[]', 'g'), '[' + n + ']');\n  return handleFieldsNested((0, _get3.default)($tree, $struct));\n};\n\nexports.default = {\n  defaultValue: defaultValue,\n  defaultClearValue: defaultClearValue,\n  parseInput: parseInput,\n  parsePath: parsePath,\n  parseArrayProp: parseArrayProp,\n  parseCheckArray: parseCheckArray,\n  parseCheckOutput: parseCheckOutput,\n  mergeSchemaDefaults: mergeSchemaDefaults,\n  handleFieldsNested: handleFieldsNested,\n  handleFieldsArrayOfStrings: handleFieldsArrayOfStrings,\n  prepareFieldsData: prepareFieldsData,\n  pathToFieldsTree: pathToFieldsTree\n};\nmodule.exports = exports['default'];","map":{"version":3,"sources":["D:/management-tool/node_modules/mobx-react-form/lib/parser.js"],"names":["Object","defineProperty","exports","value","_startsWith2","require","_startsWith3","_interopRequireDefault","_filter2","_filter3","_set2","_set3","_each2","_each3","_isEmpty2","_isEmpty3","_get2","_get3","_map2","_map3","_isPlainObject2","_isPlainObject3","_has2","_has3","_merge2","_merge3","_split2","_split3","_transform2","_transform3","_last2","_last3","_trimEnd2","_trimEnd3","_endsWith2","_endsWith3","_reduceRight2","_reduceRight3","_without2","_without3","_values2","_values3","_replace2","_replace3","_isString2","_isString3","_isNumber2","_isNumber3","_isBoolean2","_isBoolean3","_isDate2","_isDate3","_isArray2","_isArray3","_utils","_utils2","obj","__esModule","default","_defineProperty","key","enumerable","configurable","writable","defaultClearValue","_ref","undefined","defaultValue","_ref2","type","_ref2$nullable","nullable","_ref2$isEmptyArray","isEmptyArray","parsePath","path","$path","RegExp","parseInput","input","_ref3","separated","unified","fallback","$try","parseArrayProp","$val","$prop","$values","parseCheckArray","field","prop","hasIncrementalKeys","parseCheckOutput","$field","$output","defineFieldsFromStruct","struct","add","arguments","length","$","name","val","prev","indexOf","stop","handleFieldsArrayOfStrings","$fields","fields","isStruct","$obj","pathStruct","assign","handleFieldsArrayOfObjects","isArrayOfObjects","hasUnifiedProps","handleFieldsNested","strictProps","allowNested","mapNestedValuesToUnifiedValues","data","reduceValuesToUnifiedFields","values","handleFieldsPropsFallback","initial","result","v","k","isNaN","Number","mergeSchemaDefaults","validator","schema","plugins","properties","label","title","prepareFieldsData","pathToFieldsTree","n","structPath","pathToStruct","structArray","item","$tree","$struct","module"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _startsWith2 = require('lodash/startsWith');\n\nvar _startsWith3 = _interopRequireDefault(_startsWith2);\n\nvar _filter2 = require('lodash/filter');\n\nvar _filter3 = _interopRequireDefault(_filter2);\n\nvar _set2 = require('lodash/set');\n\nvar _set3 = _interopRequireDefault(_set2);\n\nvar _each2 = require('lodash/each');\n\nvar _each3 = _interopRequireDefault(_each2);\n\nvar _isEmpty2 = require('lodash/isEmpty');\n\nvar _isEmpty3 = _interopRequireDefault(_isEmpty2);\n\nvar _get2 = require('lodash/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _map2 = require('lodash/map');\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _isPlainObject2 = require('lodash/isPlainObject');\n\nvar _isPlainObject3 = _interopRequireDefault(_isPlainObject2);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _merge2 = require('lodash/merge');\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _split2 = require('lodash/split');\n\nvar _split3 = _interopRequireDefault(_split2);\n\nvar _transform2 = require('lodash/transform');\n\nvar _transform3 = _interopRequireDefault(_transform2);\n\nvar _last2 = require('lodash/last');\n\nvar _last3 = _interopRequireDefault(_last2);\n\nvar _trimEnd2 = require('lodash/trimEnd');\n\nvar _trimEnd3 = _interopRequireDefault(_trimEnd2);\n\nvar _endsWith2 = require('lodash/endsWith');\n\nvar _endsWith3 = _interopRequireDefault(_endsWith2);\n\nvar _reduceRight2 = require('lodash/reduceRight');\n\nvar _reduceRight3 = _interopRequireDefault(_reduceRight2);\n\nvar _without2 = require('lodash/without');\n\nvar _without3 = _interopRequireDefault(_without2);\n\nvar _values2 = require('lodash/values');\n\nvar _values3 = _interopRequireDefault(_values2);\n\nvar _replace2 = require('lodash/replace');\n\nvar _replace3 = _interopRequireDefault(_replace2);\n\nvar _isString2 = require('lodash/isString');\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _isNumber2 = require('lodash/isNumber');\n\nvar _isNumber3 = _interopRequireDefault(_isNumber2);\n\nvar _isBoolean2 = require('lodash/isBoolean');\n\nvar _isBoolean3 = _interopRequireDefault(_isBoolean2);\n\nvar _isDate2 = require('lodash/isDate');\n\nvar _isDate3 = _interopRequireDefault(_isDate2);\n\nvar _isArray2 = require('lodash/isArray');\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar defaultClearValue = function defaultClearValue(_ref) {\n  var value = _ref.value;\n\n  if ((0, _isArray3.default)(value)) return [];\n  if ((0, _isDate3.default)(value)) return null;\n  if ((0, _isBoolean3.default)(value)) return false;\n  if ((0, _isNumber3.default)(value)) return 0;\n  if ((0, _isString3.default)(value)) return '';\n  return undefined;\n};\n\nvar defaultValue = function defaultValue(_ref2) {\n  var type = _ref2.type,\n      _ref2$nullable = _ref2.nullable,\n      nullable = _ref2$nullable === undefined ? false : _ref2$nullable,\n      _ref2$isEmptyArray = _ref2.isEmptyArray,\n      isEmptyArray = _ref2$isEmptyArray === undefined ? false : _ref2$isEmptyArray;\n\n  if (type === 'date') return null;\n  if (type === 'datetime-local') return null;\n  if (type === 'checkbox') return false;\n  if (type === 'number') return 0;\n  if (nullable) return null;\n  if (isEmptyArray) return [];\n  return '';\n};\n\nvar parsePath = function parsePath(path) {\n  var $path = path;\n  $path = (0, _replace3.default)($path, new RegExp('\\\\[', 'g'), '.');\n  $path = (0, _replace3.default)($path, new RegExp('\\\\]', 'g'), '');\n  return $path;\n};\n\nvar parseInput = function parseInput(input, _ref3) {\n  var type = _ref3.type,\n      isEmptyArray = _ref3.isEmptyArray,\n      nullable = _ref3.nullable,\n      separated = _ref3.separated,\n      unified = _ref3.unified,\n      fallback = _ref3.fallback;\n  return input(_utils2.default.$try(separated, unified, fallback, defaultValue({\n    type: type, isEmptyArray: isEmptyArray, nullable: nullable\n  })));\n};\n\nvar parseArrayProp = function parseArrayProp($val, $prop) {\n  var $values = (0, _values3.default)($val);\n  if ($prop === 'value' || $prop === 'initial' || $prop === 'default') {\n    return (0, _without3.default)($values, null, undefined, '');\n  }\n  return $values;\n};\n\nvar parseCheckArray = function parseCheckArray(field, value, prop) {\n  return field.hasIncrementalKeys ? parseArrayProp(value, prop) : value;\n};\n\nvar parseCheckOutput = function parseCheckOutput($field, $prop) {\n  return $prop === 'value' && $field.$output ? $field.$output($field[$prop]) : $field[$prop];\n};\n\nvar defineFieldsFromStruct = function defineFieldsFromStruct(struct) {\n  var add = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return (0, _reduceRight3.default)(struct, function ($, name) {\n    var obj = {};\n    if ((0, _endsWith3.default)(name, '[]')) {\n      var val = add ? [$] : [];\n      obj[(0, _trimEnd3.default)(name, '[]')] = val;\n      return obj;\n    }\n    // no brakets\n    var prev = struct[struct.indexOf(name) - 1];\n    var stop = (0, _endsWith3.default)(prev, '[]') && (0, _last3.default)(struct) === name;\n    if (!add && stop) return obj;\n    obj[name] = $;\n    return obj;\n  }, {});\n};\n\nvar handleFieldsArrayOfStrings = function handleFieldsArrayOfStrings($fields) {\n  var add = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var fields = $fields;\n  // handle array with field struct (strings)\n  if (_utils2.default.isStruct(fields)) {\n    fields = (0, _transform3.default)(fields, function ($obj, $) {\n      var pathStruct = (0, _split3.default)($, '.');\n      // as array of strings (with empty values)\n      if (!pathStruct.length) return Object.assign($obj, _defineProperty({}, $, ''));\n      // define flat or nested fields from pathStruct\n      return (0, _merge3.default)($obj, defineFieldsFromStruct(pathStruct, add));\n    }, {});\n  }\n  return fields;\n};\n\nvar handleFieldsArrayOfObjects = function handleFieldsArrayOfObjects($fields) {\n  var fields = $fields;\n  // handle array of objects (with unified props)\n  if (_utils2.default.isArrayOfObjects(fields)) {\n    fields = (0, _transform3.default)(fields, function ($obj, field) {\n      if (_utils2.default.hasUnifiedProps({ fields: { field: field } }) && !(0, _has3.default)(field, 'name')) return undefined;\n      return Object.assign($obj, _defineProperty({}, field.name, field));\n    }, {});\n  }\n  return fields;\n};\n\nvar handleFieldsNested = function handleFieldsNested(fields) {\n  var strictProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return (0, _transform3.default)(fields, function (obj, field, key) {\n    if (_utils2.default.allowNested(field, strictProps)) {\n      // define nested field\n      return Object.assign(obj, _defineProperty({}, key, { fields: _utils2.default.isEmptyArray(field) ? [] : handleFieldsNested(field) }));\n    }\n    return Object.assign(obj, _defineProperty({}, key, field));\n  }, {});\n};\n\n/* mapNestedValuesToUnifiedValues\n\nFROM:\n\n{\n  street: '123 Fake St.',\n  zip: '12345',\n}\n\nTO:\n\n[{\n  name: 'street'\n  value: '123 Fake St.',\n}, {\n  name: 'zip'\n  value: '12345',\n}]\n\n*/\nvar mapNestedValuesToUnifiedValues = function mapNestedValuesToUnifiedValues(data) {\n  return (0, _isPlainObject3.default)(data) ? (0, _map3.default)(data, function (value, name) {\n    return { value: value, name: name };\n  }) : undefined;\n};\n\n/* reduceValuesToUnifiedFields\n\nFROM:\n\n{\n  name: 'fatty',\n  address: {\n    street: '123 Fake St.',\n    zip: '12345',\n  },\n};\n\nTO:\n\n{\n  name: {\n    value: 'fatty',\n    fields: undefined\n  },\n  address: {\n    value: {\n      street: '123 Fake St.',\n      zip: '12345'\n    },\n    fields: [ ... ]\n  },\n};\n\n*/\nvar reduceValuesToUnifiedFields = function reduceValuesToUnifiedFields(values) {\n  return (0, _transform3.default)(values, function (obj, value, key) {\n    return Object.assign(obj, _defineProperty({}, key, {\n      value: value,\n      fields: mapNestedValuesToUnifiedValues(value)\n    }));\n  }, {});\n};\n\n/*\n  Fallback Unified Props to Sepated Mode\n*/\nvar handleFieldsPropsFallback = function handleFieldsPropsFallback(fields, initial, fallback) {\n  if (!(0, _has3.default)(initial, 'values')) return fields;\n  // if the 'values' object is passed in constructor\n  // then update the fields definitions\n  var values = initial.values;\n\n  if (_utils2.default.hasUnifiedProps({ fields: fields })) {\n    values = reduceValuesToUnifiedFields(values);\n  }\n  return (0, _merge3.default)(fields, (0, _transform3.default)(values, function (result, v, k) {\n    if ((0, _isArray3.default)(fields[k])) result[k] = v;\n    if (!(k in fields) && (!isNaN(Number(k)) || fallback)) result[k] = v;\n  }, {}));\n};\n\nvar mergeSchemaDefaults = function mergeSchemaDefaults(fields, validator) {\n  if (validator) {\n    var schema = (0, _get3.default)(validator.plugins, 'svk.config.schema');\n    if ((0, _isEmpty3.default)(fields) && schema && !!schema.properties) {\n      (0, _each3.default)(schema.properties, function (prop, key) {\n        (0, _set3.default)(fields, key, {\n          value: prop.default,\n          label: prop.title\n        });\n      });\n    }\n  }\n  return fields;\n};\n\nvar prepareFieldsData = function prepareFieldsData(initial) {\n  var strictProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var fallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n  var fields = (0, _merge3.default)(handleFieldsArrayOfStrings(initial.fields, false), handleFieldsArrayOfStrings(initial.struct, false));\n\n  fields = handleFieldsArrayOfObjects(fields);\n  fields = handleFieldsPropsFallback(fields, initial, fallback);\n  fields = handleFieldsNested(fields, strictProps);\n\n  return fields;\n};\n\nvar pathToFieldsTree = function pathToFieldsTree(struct, path) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var add = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  var structPath = _utils2.default.pathToStruct(path);\n  var structArray = (0, _filter3.default)(struct, function (item) {\n    return (0, _startsWith3.default)(item, structPath);\n  });\n  var $tree = handleFieldsArrayOfStrings(structArray, add);\n  var $struct = (0, _replace3.default)(structPath, new RegExp('\\\\[]', 'g'), '[' + n + ']');\n  return handleFieldsNested((0, _get3.default)($tree, $struct));\n};\n\nexports.default = {\n  defaultValue: defaultValue,\n  defaultClearValue: defaultClearValue,\n  parseInput: parseInput,\n  parsePath: parsePath,\n  parseArrayProp: parseArrayProp,\n  parseCheckArray: parseCheckArray,\n  parseCheckOutput: parseCheckOutput,\n  mergeSchemaDefaults: mergeSchemaDefaults,\n  handleFieldsNested: handleFieldsNested,\n  handleFieldsArrayOfStrings: handleFieldsArrayOfStrings,\n  prepareFieldsData: prepareFieldsData,\n  pathToFieldsTree: pathToFieldsTree\n};\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}